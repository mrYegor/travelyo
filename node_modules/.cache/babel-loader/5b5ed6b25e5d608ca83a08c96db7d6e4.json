{"ast":null,"code":"import _slicedToArray from \"/home/yehor/public_html/travelyo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/yehor/public_html/travelyo/src/App.js\";\nimport React, { useEffect } from 'react';\nimport EventsList from './events/EventsList';\nimport ImageSlider from './imageSlider/ImageSlider';\nimport Context from './context';\n\nfunction App() {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        events = _React$useState2[0],\n        setEvents = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        filteredEvents = _React$useState4[0],\n        setFilteredEvents = _React$useState4[1];\n\n  const _React$useState5 = React.useState(2),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        eventsCount = _React$useState6[0],\n        setEventsCount = _React$useState6[1];\n\n  const _React$useState7 = React.useState(false),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        visibleSlider = _React$useState8[0],\n        toggleSliderVisibility = _React$useState8[1];\n\n  const _React$useState9 = React.useState([]),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        images = _React$useState10[0],\n        setImages = _React$useState10[1];\n\n  const _React$useState11 = React.useState([]),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        categories = _React$useState12[0],\n        setCategories = _React$useState12[1];\n\n  const addEventBtn = React.createRef();\n\n  function getEvents(eventsCount) {\n    fetch('https://s3.eu-central-1.amazonaws.com/js.smartair.co.il/custom/activities.json').then(resp => resp.json()).then(events => {\n      /* Object.values() doesn't work in my version of Chrome, so I cheated in this case */\n      events = Object.keys(events.activities).map(key => events.activities[key]);\n\n      if (events.length > eventsCount) {\n        events.length = eventsCount;\n      } else if (addEventBtn.current) {\n        addEventBtn.current.classList.add('none');\n      }\n\n      setEvents(events);\n      setFilteredEvents(events);\n      setCategories(getCategories(events));\n      setEventsCount(eventsCount + 1);\n    });\n  }\n\n  useEffect(() => {\n    getEvents(eventsCount);\n  }, []);\n\n  function getCategories(events) {\n    let tempCat = [];\n\n    for (let event of events) {\n      tempCat.push([...event.category]);\n    }\n\n    for (let i = 0; i < tempCat.length; i++) {\n      for (let category of tempCat[i]) {\n        if (!categories.includes(category.toLowerCase())) {\n          categories.push(category.toLowerCase());\n        }\n      }\n    }\n\n    return categories;\n  }\n\n  function addEvent() {\n    getEvents(eventsCount);\n  }\n\n  function getImages(img) {\n    if (img.length >= 1) {\n      images.length = 0;\n      images.push([...img]);\n      toggleSliderVisibility(true);\n      setImages(images);\n    }\n  }\n\n  function filterByCategory(filteredCategory) {\n    setEvents(filteredEvents);\n    /* Some of categories are capitalized*/\n\n    if (filteredCategory !== 'reset') {\n      let capitalizeFilter = `${filteredCategory.charAt(0).toUpperCase()}${filteredCategory.slice(1)}`;\n      setEvents(filteredEvents.filter(event => event.category.includes(filteredCategory) || event.category.includes(capitalizeFilter)));\n    }\n  }\n\n  function sortByPrice(priceDirection) {\n    filteredEvents.sort((a, b) => {\n      return a.price - b.price;\n    });\n\n    if (priceDirection === 'toLow') {\n      let promiseToSort = new Promise();\n      setEvents(filteredEvents.reverse());\n    } else {\n      setEvents(filteredEvents);\n    }\n\n    console.dir(filteredEvents);\n  }\n\n  function hideSlider() {\n    toggleSliderVisibility(false);\n  }\n\n  return React.createElement(Context.Provider, {\n    value: {\n      getImages,\n      hideSlider,\n      filterByCategory,\n      sortByPrice\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(ImageSlider, {\n    visibleSlider: visibleSlider,\n    slideImages: images,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(EventsList, {\n    events: events,\n    categories: categories,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"show-more-btn\",\n    onClick: addEvent,\n    ref: addEventBtn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Show more\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/yehor/public_html/travelyo/src/App.js"],"names":["React","useEffect","EventsList","ImageSlider","Context","App","useState","events","setEvents","filteredEvents","setFilteredEvents","eventsCount","setEventsCount","visibleSlider","toggleSliderVisibility","images","setImages","categories","setCategories","addEventBtn","createRef","getEvents","fetch","then","resp","json","Object","keys","activities","map","key","length","current","classList","add","getCategories","tempCat","event","push","category","i","includes","toLowerCase","addEvent","getImages","img","filterByCategory","filteredCategory","capitalizeFilter","charAt","toUpperCase","slice","filter","sortByPrice","priceDirection","sort","a","b","price","promiseToSort","Promise","reverse","console","dir","hideSlider"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport EventsList from './events/EventsList';\nimport ImageSlider from './imageSlider/ImageSlider';\nimport Context from './context';\n\nfunction App() {\n  const [events, setEvents] = React.useState([]);\n  const [filteredEvents, setFilteredEvents] = React.useState([]);\n  const [eventsCount, setEventsCount] = React.useState(2);\n  const [visibleSlider, toggleSliderVisibility] = React.useState(false);\n  const [images, setImages] = React.useState([]);\n  const [categories, setCategories] = React.useState([]);\n\n  const addEventBtn = React.createRef();\n\n  function getEvents(eventsCount) {\n      fetch('https://s3.eu-central-1.amazonaws.com/js.smartair.co.il/custom/activities.json')\n          .then(resp => resp.json())\n          .then((events) => {\n              /* Object.values() doesn't work in my version of Chrome, so I cheated in this case */\n              events = Object.keys(events.activities).map(key => events.activities[key]);\n              if(events.length > eventsCount) {\n                  events.length = eventsCount;\n              } else if (addEventBtn.current) {\n                 addEventBtn.current.classList.add('none');\n              }\n\n              setEvents(events);\n              setFilteredEvents(events);\n              setCategories(getCategories(events));\n              setEventsCount(eventsCount + 1);\n          })\n  }\n\n  useEffect(() => {\n      getEvents(eventsCount)\n  }, []);\n\n  function getCategories(events) {\n      let tempCat = [];\n      for (let event of events) {\n          tempCat.push([...event.category])\n      }\n      for (let i = 0; i < tempCat.length; i++) {\n          for (let category of tempCat[i]) {\n              if (!categories.includes(category.toLowerCase())) {\n                  categories.push(category.toLowerCase())\n              }\n          }\n      }\n      return categories\n  }\n\n  function addEvent() {\n      getEvents(eventsCount);\n  }\n\n  function getImages(img) {\n      if (img.length >= 1) {\n          images.length = 0;\n          images.push([...img]);\n          toggleSliderVisibility(true);\n          setImages(images);\n      }\n  }\n\n  function filterByCategory(filteredCategory) {\n      setEvents(filteredEvents);\n      /* Some of categories are capitalized*/\n      if (filteredCategory !== 'reset') {\n          let capitalizeFilter = `${filteredCategory.charAt(0).toUpperCase()}${filteredCategory.slice(1)}`;\n          setEvents(\n              filteredEvents.filter(event => event.category.includes(filteredCategory) || event.category.includes(capitalizeFilter)\n          ))\n      }\n\n  }\n\n  function sortByPrice(priceDirection) {\n\n      filteredEvents.sort((a, b) => {\n          return a.price - b.price\n      });\n\n      if (priceDirection === 'toLow') {\n          let promiseToSort = new Promise()\n          setEvents(filteredEvents.reverse());\n      } else {\n          setEvents(filteredEvents)\n      }\n\n      console.dir(filteredEvents);\n  }\n\n  function hideSlider() {\n      toggleSliderVisibility(false);\n  }\n\n  return (\n      <Context.Provider value={{getImages, hideSlider, filterByCategory, sortByPrice}}>\n        <div className=\"wrapper\">\n          <ImageSlider visibleSlider={visibleSlider} slideImages={images}/>\n          <EventsList events={events} categories={categories}/>\n          <button type=\"submit\" className='show-more-btn' onClick={addEvent} ref={addEventBtn}>Show more</button>\n        </div>\n      </Context.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}